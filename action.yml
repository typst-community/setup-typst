name: Setup Typst
description: ðŸ“‘ Install Typst for use in GitHub Actions

branding:
  icon: terminal
  color: white

inputs:
  typst-token:
    description: >
      The GitHub token to use when pulling versions from typst/typst. By default
      this should cover all cases. You shouldn't have to touch this setting.
    default:
      ${{ github.server_url == 'https://github.com' && github.token || '' }}
  typst-version:
    description: >
      The version of Typst to install. This can be an exact version like
      '0.10.0' or a semver range like '0.10' or '0.x'. You can also specify
      'latest' to always use the latest version. The default is 'latest'.
    default: latest
  packages-id:
    description: >
      The identifier of a group of packages to be cached, to distinguish
      between different groups of packages and to flush the cache folder. The
      default is -1, which means no caching.
    default: -1

outputs:
  typst-version:
    description: >
      The version of 'typst' that was installed. This will be something like
      '0.10.0' or similar.
  cache-hit:
    description: >
      Whether or not Typst was restored from the runner's cache or download
      anew.

runs:
  using: node20
  main: dist/main.js
  post: dist/post.js
